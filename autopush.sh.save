#!/bin/bash

cd ~/Lotus-Pack || exit 1

# Проверяем наличие изменений, включая удалённые файлы
if [[ $(git status --porcelain) ]]; then
    echo "Изменения найдены, выполняется синхронизация..."

    # Добавляем все изменения (новые и модифицированные файлы)
    git add .

    # Явно удаляем всё, что удалено локально
    git ls-files --deleted -z | xargs -0 git rm

    # Коммит с меткой времени
    git commit -m "Автосинхронизация: $(date '+%Y-%m-%d %H:%M:%S')"

    # Пушим в GitHub
    git push origin main
else
    echo "Нет изменений для синхронизации: $(date '+%Y-%m-%d %H:%M:%S')"
fi

